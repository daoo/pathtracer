#!/usr/bin/env bash

root="$(realpath .)"
build="$(realpath build)"

mkdir -p $build

echo "$build/linux-debug.ninja"
cat - build.ninja.template <<DOC > $build/linux-debug.ninja
src = $root/src
outdir = $build/linux-debug
cxx = clang++
cxxflags = -Wall -Wextra -Wconversion -Wshadow -g -Xclang -fcolor-diagnostics
ldflags =
DOC

echo "$build/linux-release.ninja"
cat - build.ninja.template <<DOC > $build/linux-release.ninja
src = $root/src
outdir = $build/linux-release
cxx = clang++
cxxflags = -Ofast
ldflags =
DOC

echo "$build/linux-extreme.ninja"
cat - build.ninja.template <<DOC > $build/linux-extreme.ninja
src = $root/src
outdir = $build/linux-extreme
cxx = g++
cxxflags = -Ofast -march=native -flto
ldflags = -flto
DOC
