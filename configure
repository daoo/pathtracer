#!/usr/bin/env bash

root="$(realpath .)"
build="$(realpath build)"

mkdir -p $build

echo "$build/clang-debug.ninja"
cat - build.ninja.template <<DOC > $build/clang-debug.ninja
src = $root/src
outdir = $build/clang-debug
cxx = clang++
cxxflags = -Weverything -Wno-missing-prototypes -Wno-c++98-compat -Wno-padded -Wno-weak-vtables -g -Xclang -fcolor-diagnostics
ldflags =
DOC

echo "$build/gcc-debug.ninja"
cat - build.ninja.template <<DOC > $build/gcc-debug.ninja
src = $root/src
outdir = $build/gcc-debug
cxx = g++
cxxflags = -Wall -Wextra -Weffc++ -Wno-padded -g -fdiagnostics-color=always
ldflags =
DOC

echo "$build/linux-release.ninja"
cat - build.ninja.template <<DOC > $build/linux-release.ninja
src = $root/src
outdir = $build/linux-release
cxx = clang++
cxxflags = -Ofast -DNDEBUG
ldflags =
DOC

echo "$build/linux-extreme.ninja"
cat - build.ninja.template <<DOC > $build/linux-extreme.ninja
src = $root/src
outdir = $build/linux-extreme
cxx = g++
cxxflags = -Ofast -march=native -flto -DNDEBUG
ldflags = -flto
DOC
